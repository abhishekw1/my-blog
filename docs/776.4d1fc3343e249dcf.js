"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[776],{2776:(yt,_,a)=>{a.d(_,{zS:()=>pt,cx:()=>mt,sG:()=>H});var S=a(7582),O=a(6814),o=a(8926),f=a(4824),B=a(5619),m=a(2181),w=a(4664),V=a(5592),J=a(2420);const j=new V.y(J.Z);var b=a(2096),T=a(9397),K=a(1374),y=a(7398),Z=a(8645);const D={now:()=>(D.delegate||Date).now(),delegate:void 0};class P extends Z.x{constructor(r=1/0,t=1/0,n=D){super(),this._bufferSize=r,this._windowTime=t,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,t)}next(r){const{isStopped:t,_buffer:n,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(n.push(r),!i&&n.push(s.now()+l)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(r),{_infiniteTimeWindow:n,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!r.closed;l+=n?1:2)r.next(s[l]);return this._checkFinalizedStatuses(r),t}_trimBuffer(){const{_bufferSize:r,_timestampProvider:t,_buffer:n,_infiniteTimeWindow:i}=this,s=(i?1:2)*r;if(r<1/0&&s<n.length&&n.splice(0,n.length-s),!i){const l=t.now();let h=0;for(let c=1;c<n.length&&n[c]<=l;c+=2)h=c;h&&n.splice(0,h+1)}}}var k=a(3020);function C(e,r,t){let n,i=!1;return e&&"object"==typeof e?({bufferSize:n=1/0,windowTime:r=1/0,refCount:i=!1,scheduler:t}=e):n=e??1/0,(0,k.B)({connector:()=>new P(n,r,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function N(...e){const r=e.length;if(0===r)throw new Error("list of properties cannot be empty.");return(0,y.U)(t=>{let n=t;for(let i=0;i<r;i++){const s=n?.[e[i]];if(!(typeof s<"u"))return;n=s}return n})}var X=a(6973),Q=a(305);function g(e,r){const t="object"==typeof r;return new Promise((n,i)=>{const s=new Q.Hp({next:l=>{n(l),s.unsubscribe()},error:i,complete:()=>{t?n(r.defaultValue):i(new X.K)}});e.subscribe(s)})}var q=a(9360),tt=a(8251),G=a(6306),nt=a(3019),U=a(9862);const it=["*"],I={useTransferState:!0,alwaysMonitor:!1,manualIdle:!1,baseURIForScullyContent:"http://localhost:1668"},E=new o.OlP("scullyLibConfig",{factory:()=>I}),d=e=>(e.includes("#")&&(e=e.split("#")[0]),e.includes("?")&&(e=e.split("?")[0]),e.endsWith("/")?e.slice(0,-1):e),x=()=>window&&"running"===window.ScullyIO,M=()=>window&&"generated"===window.ScullyIO;function W(e,r){return(e=e??"").endsWith("/")&&r.startsWith("/")?`${e}${r.substr(1)}`:e.endsWith("/")||r.startsWith("/")?`${e}${r}`:`${e}/${r}`}const R="ScullyIO-transfer-state",F="/** ___SCULLY_STATE_START___ */",$="/** ___SCULLY_STATE_END___ */";let rt=(()=>{class e{constructor(t,n,i){this.document=t,this.router=n,this.http=i,this.inlineOnly=!1,this.currentBaseUrl="//",this.stateBS=new B.X({}),this.state$=this.stateBS.pipe((0,m.h)(s=>void 0!==s)),this.nextUrl=this.router.events.pipe((0,m.h)(s=>s instanceof f.OD),(0,w.w)(s=>d(this.initialUrl)===d(s.url)?(this.initialUrl="__done__with__Initial__navigation__",j):(0,b.of)(s)),(0,T.b)(()=>this.stateBS.next(void 0)),(0,w.w)(s=>this.router.events.pipe((0,m.h)(l=>l instanceof f.c9&&l.url===s.url),(0,K.P)())),(0,y.U)(s=>d(s.urlAfterRedirects||s.url)),C(1))}startMonitoring(){window&&window["ScullyIO-injected"]&&window["ScullyIO-injected"].inlineStateOnly&&(this.inlineOnly=!0),this.setupEnvForTransferState(),this.setupStartNavMonitoring()}setupEnvForTransferState(){if(x()){this.injectScript();const t=window["ScullyIO-exposed"]||{};t.transferState&&(this.stateBS.next(t.transferState),this.saveState(t.transferState))}else this.initialUrl=window.location.pathname||"__no_NO_no__",this.initialUrl="/"!==this.initialUrl&&this.initialUrl.endsWith("/")?this.initialUrl.slice(0,-1):this.initialUrl,M()&&this.stateBS.next(window&&window[R]||{})}injectScript(){this.script=this.document.createElement("script"),this.script.setAttribute("id",R);let t=this.document.body.lastChild;for(;"SCRIPT"===t.previousSibling.nodeName;)t=t.previousSibling;this.document.body.insertBefore(this.script,t)}getState(t){return this.fetchTransferState(),this.state$.pipe(N(t))}stateHasKey(t){return this.stateBS.value&&this.stateBS.value.hasOwnProperty(t)}stateKeyHasValue(t){return this.stateBS.value&&this.stateBS.value.hasOwnProperty(t)&&null!=this.stateBS.value[t]}setState(t,n){const i=Object.assign(Object.assign({},this.stateBS.value),{[t]:n});this.stateBS.next(i),this.saveState(i)}saveState(t){x()&&(this.script.textContent=`{window['${R}']=_u(String.raw\`${F}${function ot(e){const r={"'":"_~q~",$:"_~o~","`":"_~b~","/":"_~s~","<":"_~l~",">":"_~g~"};return e.replace(/[\$`'<>\/]/g,t=>r[t]).replace(/\\\"/g,"_~d~")}(JSON.stringify(t))}${$}\`);function _u(t){t=t.split('${F}')[1].split('${$}')[0];const u={'_~b~': "\`",'_~q~': "'",'_~o~': '$','_~s~': '/','_~l~': '<','_~g~': '>'};return JSON.parse(t.replace(/_~d~/g,'\\\\"').replace(/_~[^]~/g, (s) => u[s]).replace(/\\n/g,'\\\\n').replace(/\\t/g,'\\\\t').replace(/\\r/g,'\\\\r'));}}`)}setupStartNavMonitoring(){M()&&this.nextUrl.subscribe()}useScullyTransferState(t,n){return M()?this.getState(t):n.pipe((0,T.b)(i=>this.setState(t,i)))}fetchTransferState(){return(0,S.mG)(this,void 0,void 0,function*(){const t=s=>s.split("/").filter(l=>""!==l.trim())[0];yield new Promise(s=>setTimeout(s,0));const n=yield g(this.nextUrl),i=t(n);this.currentBaseUrl!==i&&(this.currentBaseUrl=i,this.nextUrl.pipe(function et(e,r=!1){return(0,q.e)((t,n)=>{let i=0;t.subscribe((0,tt.x)(n,s=>{const l=e(s,i++);(l||r)&&n.next(s),!l&&n.complete()}))})}(s=>t(s)===this.currentBaseUrl),(0,w.w)(s=>this.inlineOnly?this.readFromIndex(s):this.readFromJson(s)),(0,G.K)(s=>(console.warn("Error while loading of parsing Scully state:",s),(0,b.of)({}))),(0,T.b)(s=>{this.stateBS.next(s)})).subscribe({complete:()=>{this.currentBaseUrl="//"}}))})}readFromJson(t){return g(this.http.get(Y(W(t,"/data.json"))))}readFromIndex(t){return g(this.http.get(Y(W(t,"/index.html")),{responseType:"text"})).then(n=>{const i=n.split(F)[1].split($)[0];return JSON.parse(function lt(e){const r={"_~q~":"'","_~b~":"`","_~o~":"$","_~s~":"/","_~l~":"<","_~g~":">"};return e.replace(/_~d~/g,'\\"').replace(/_~[^]~/g,t=>r[t]).replace(/\n/g,"\\n").replace(/\r/g,"\\r")}(i))})}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(O.K0),o.LFG(f.F0),o.LFG(U.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Y(e){return e.startsWith("/")?e.slice(1):e}let at=(()=>{class e{constructor(t,n,i,s,l){this.zone=t,this.router=n,this.document=s,this.initialUrl=function ut(e){return e.endsWith("/")?e.slice(0,-1):e}(window&&window.location&&window.location.pathname)||"",this.imState=new B.X({idle:!1,timeOut:5e3}),this.idle$=this.imState.pipe(N("idle")),this.initApp=new Event("AngularInitialized",{bubbles:!0,cancelable:!1}),this.appReady=new Event("AngularReady",{bubbles:!0,cancelable:!1}),this.appTimeout=new Event("AngularTimeout",{bubbles:!0,cancelable:!1}),this.scullyLibConfig=Object.assign({},I,i);const c=!!(window["ScullyIO-exposed"]||{}).manualIdle;!this.scullyLibConfig.manualIdle&&window&&(this.scullyLibConfig.alwaysMonitor||x())&&(this.document.dispatchEvent(this.initApp),this.router.events.pipe((0,m.h)(u=>u instanceof f.m2&&void 0!==u.urlAfterRedirects),(0,m.h)(u=>!c||u.urlAfterRedirects!==this.initialUrl),(0,T.b)(()=>this.zoneIdleCheck())).subscribe()),this.scullyLibConfig.manualIdle&&this.document.dispatchEvent(this.initApp),this.scullyLibConfig.useTransferState&&l.startMonitoring()}fireManualMyAppReadyEvent(){return(0,S.mG)(this,void 0,void 0,function*(){return this.document.dispatchEvent(this.appReady)})}init(){return g(this.idle$)}zoneIdleCheck(){return(0,S.mG)(this,void 0,void 0,function*(){if(void 0===Zone)return this.simpleTimeout();const t=Zone.current.get("TaskTrackingZone");if(void 0===t)return this.simpleTimeout();this.imState.value.idle&&(yield this.setState("idle",!1)),this.zone.runOutsideAngular(()=>{let n,i=0;const s=Date.now(),l=()=>{clearTimeout(n),Date.now()-s>3e4?this.document.dispatchEvent(this.appTimeout):t.macroTasks.length>0&&void 0!==t.macroTasks.find(h=>h.source.includes("XMLHttpRequest"))||i<1?n=setTimeout(()=>{i+=1,l()},50):this.zone.run(()=>{setTimeout(()=>{this.document.dispatchEvent(this.appReady),this.setState("idle",!0)},250)})};l()})})}simpleTimeout(){return(0,S.mG)(this,void 0,void 0,function*(){console.warn("Scully is using timeouts, add the needed polyfills instead!"),yield new Promise(t=>setTimeout(t,this.imState.value.timeOut)),this.document.dispatchEvent(this.appReady)})}setPupeteerTimeoutValue(t){this.imState.next(Object.assign(Object.assign({},this.imState.value),{timeOut:t}))}setState(t,n){this.imState.next(Object.assign(Object.assign({},this.imState.value),{[t]:n}))}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(o.R0b),o.LFG(f.F0),o.LFG(E),o.LFG(O.K0),o.LFG(rt))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),H=(()=>{class e{constructor(t,n){this.router=t,this.http=n,this.refresh=new P(1),this.allRoutes$=this.refresh.pipe((0,w.w)(()=>this.http.get("assets/scully-routes.json")),(0,G.K)(()=>(console.warn("Scully routes file not found, are you running the Scully generated version of your site?"),(0,b.of)([]))),(0,m.h)(i=>Array.isArray(i)),(0,y.U)(this.cleanDups),C({refCount:!1,bufferSize:1})),this.available$=this.allRoutes$.pipe((0,y.U)(i=>i.filter(s=>!s.hasOwnProperty("published")||!1!==s.published)),C({refCount:!1,bufferSize:1})),this.unPublished$=this.allRoutes$.pipe((0,y.U)(i=>i.filter(s=>!!s.hasOwnProperty("published")&&!1===s.published)),C({refCount:!1,bufferSize:1})),this.topLevel$=this.available$.pipe((0,y.U)(i=>i.filter(s=>!s.route.slice(1).includes("/"))),C({refCount:!1,bufferSize:1})),this.reload()}getCurrent(){return location?(0,nt.T)((0,b.of)(new f.m2(0,"","")),this.router.events).pipe((0,m.h)(t=>t instanceof f.m2),(0,w.w)(()=>this.available$),(0,y.U)(t=>{const n=d(encodeURI(location.pathname).trim());return t.find(i=>n===d(i.route.trim())||i.slugs&&Array.isArray(i.slugs)&&i.slugs.find(s=>n.endsWith(d(s.trim()))))})):(0,b.of)()}cleanDups(t){const n=new Map;return t.forEach(i=>n.set(JSON.stringify(Object.assign(Object.assign({},i),{route:ct(i)?"":i.route})),i)),[...n.values()]}reload(){this.refresh.next()}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(f.F0),o.LFG(U.eN))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ct(e){const r=Object.keys(e);return!(1===r.length&&r.includes("route")||2===r.length&&r.includes("route")&&r.includes("title"))}let L,pt=(()=>{class e{constructor(t,n,i,s,l,h,c){this.elmRef=t,this.srs=n,this.router=i,this.location=s,this.http=l,this.document=h,this.conf=c,this.baseUrl=this.conf.useTransferState||I.useTransferState,this.elm=this.elmRef.nativeElement,this.routes=g(this.srs.allRoutes$),this.routeUpdates$=this.router.events.pipe((0,m.h)(u=>u instanceof f.m2),(0,m.h)(u=>L&&!L.endsWith(d(u.urlAfterRedirects))),(0,T.b)(u=>this.replaceContent())),this.routeSub=this.routeUpdates$.subscribe()}ngOnInit(){this.elm&&this.handlePage()}handlePage(){return(0,S.mG)(this,void 0,void 0,function*(){const t=d(location.href);if(L===t)return;L=t;const n=this.document.createElement("template"),i=this.getCSSId(this.elm);if(window.scullyContent){const c=window.scullyContent.html;n.innerHTML=i!==window.scullyContent.cssId?c.split(window.scullyContent.cssId).join(i):c}else{if(x())return;yield g(this.http.get(t+"/index.html",{responseType:"text"})).catch(c=>{if((0,o.X6Q)()){const u=new URL(location.href),p=`${this.conf.baseURIForScullyContent}/${d(u.pathname)}/index.html`;return g(this.http.get(p,{responseType:"text"}))}return Promise.reject(c)}).then(c=>{try{const u=c.split("\x3c!--scullyContent-begin--\x3e")[1].split("\x3c!--scullyContent-end--\x3e")[0];if(u.includes("_ngcontent")){const p="_ngcontent"+u.split("_ngcontent")[1].split("=")[0];n.innerHTML=u.split(p).join(i)}else n.innerHTML=u}catch{n.innerHTML='<h2 id="___scully-parsing-error___">Sorry, could not parse static page content</h2>\n            <p>This might happen if you are not using the static generated pages.</p>'}}).catch(c=>{n.innerHTML='<h2 id="___scully-parsing-error___">Sorry, could not load static page content</h2>',console.error("problem during loading static scully content",c)})}const s=this.elm.parentElement||this.document.body,l=this.document.createComment("scullyContent-begin"),h=this.document.createComment("scullyContent-end");s.insertBefore(l,this.elm),s.insertBefore(n.content,this.elm),s.insertBefore(h,this.elm),setTimeout(()=>this.document.querySelectorAll("[href]").forEach(this.upgradeToRoutelink.bind(this)),10)})}upgradeToRoutelink(t){var n;return(0,S.mG)(this,void 0,void 0,function*(){if(!["A","BUTTON"].includes(t.tagName))return;const i=null===(n=t.dataset)||void 0===n?void 0:n.hash;if(i)return t.setAttribute("href","#"+i),t.setAttribute("onclick",""),void(t.onclick=u=>{u.preventDefault();const p=document.getElementById(i);if(p){const v=new URL(window.location.href);v.hash=i,history.replaceState("","",v.toString()),p.scrollIntoView()}});const s=yield this.routes,l=t.getAttribute("href"),h=d(l.toLowerCase()),c=s.find(u=>d(u.route.toLowerCase())===h);h&&c&&!h.startsWith("#")&&(t.onclick=u=>(0,S.mG)(this,void 0,void 0,function*(){const p=c.route.split("/"),v=location.pathname.split("/");v.pop(),u.preventDefault(),(yield this.router.navigate(p).catch(A=>(console.error("routing error",A),!1)))&&v.every((A,St)=>p[St]===A)&&p.length!==v.length+1&&setTimeout(()=>this.replaceContent(),10)}))})}replaceContent(){window.scullyContent=void 0;const t=this.elm.parentElement;let n=function ht(e,r){const t=[],n=document.createNodeIterator(e,NodeFilter.SHOW_COMMENT,{acceptNode:s=>r&&s.nodeValue&&!s.nodeValue.includes(r)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT});let i;for(;i=n.nextNode();)t.push(i);return t}(t,"scullyContent-begin")[0];for(;n&&n!==this.elm;){const i=n.nextSibling;t.removeChild(n),n=i}this.handlePage()}getCSSId(t){return t.getAttributeNames().find(n=>n.startsWith("_ngcontent"))||""}ngOnDestroy(){this.routeSub.unsubscribe(),L="//"}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.SBq),o.Y36(H),o.Y36(f.F0),o.Y36(O.Ye),o.Y36(U.eN),o.Y36(O.K0),o.Y36(E))},e.\u0275cmp=o.Xpm({type:e,selectors:[["scully-content"]],ngContentSelectors:it,decls:1,vars:0,template:function(t,n){1&t&&(o.F$t(),o.Hsn(0))},styles:["\n      :host {\n        display: none;\n      }\n      scully-content {\n        display: none;\n      }\n    "],encapsulation:2,changeDetection:0}),e})(),z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({}),e})(),mt=(()=>{class e{constructor(t){this.idle=t}static forRoot(t=I){return t=Object.assign({},I,t),{ngModule:e,providers:[{provide:E,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)(o.LFG(at))},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({imports:[[z,U.JF],z]}),e})()}}]);